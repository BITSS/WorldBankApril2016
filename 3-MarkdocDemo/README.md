README for the Markdoc Demo
===========================

This folder contains files for the Markdoc Demo. Markdoc is a tool to write dynamic documents in Stata.

##What:
Dynamic documents contain analysis code and output all in one document. The old way people worked (and sadly, the way most people still work) is by having a bunch of analysis script files (.do files in Stata, or .R files in R), which would produce a bunch of output files (figures, graphs, tables, etc.) and a separate file for the final paper. 

##Why:
*Hopefully* people at least automate this process to the point where they run their scripts, and then automatically include the latest output in the paper (which can be done without too much difficulty in LaTeX--for examples, see files from [this Github repo](https://github.com/BITSS/UCSDWorkshop/tree/master/Rmarkdown) for a previous workshop I led. But people are probably not even doing that, especially if they're writing in Word. You can include references to files in Word, but it's kind of a pain, so people are probably just inserting images or copying and pasting, which you have to remember to do every time you update the figures. Once you have more than one or two figures to insert and keep updating, it becomes very hard to keep track of which script files generated which output (and it is straight up impossible for reviewers or anyone other than the original author to determine this.) Dynamic documents are the solution to this problem.

Basically, dynamic documents are a file that contains interspersed bits of code and your final paper.  Code chunk1 that generates Figure 1, intro paragraph of paper that cites Figure 1, code chunk 2, paper paragraph 2, etc. (It's much easier with an example--see the other files in this repo.)

The best dynamic documents software out there is easily [R Markdown](http://rmarkdown.rstudio.com/), which works with R. You can write your entire paper in R Markdown: figures, citations, everything. 

The option for Stata users is Markdoc. To install, type "ssc install markdoc" in Stata. Also run "adoupdate" because markdoc is a work in progress. Markdoc is also available [on Github](https://github.com/haghish/MarkDoc) in case you want to contribute. 

##Demo: 
Markdoc is written in a Stata .do file. Markdoc takes a Stata log file generated by the .do file and turns it into output of almost any format. (The engine behind formatting the output is called [Pandoc](http://pandoc.org/), which if you're interested, is a very powerful document conversion tool.)

You need to write the paper portion of your dynamic document in Markdown, LaTeX, or HTML. Markdown is by far the simplest.

1. Once you install the Markdoc .ado, type "help markdoc" for the basic commands.
2. Open the markdoc_markdown.do file in Stata. 
3. Get it to run on your computer. (You should only have to change the path at the top.)
4. Look at that nice output! (Open the example.md file in MarkdownPad or some other Markdown renderer.)
5. Clean up the .do so that only real output (and no code) is written in the final output.
6. Notice the txt command to output a Stata-calculated number directly to the paper.
5. Edit markdoc_markdown.do so that it renders the output as a Word document.
6. Edit markdoc_markdown.do so that it renders the output as HTML. 
6. Run the markdoc_html.do file and get it to render in Markdown, Word, and HTML.
7. Run the markdoc_latex.do file and get it to render in Markdown, Word, and HTML.
8. OPTIONAL: If you have [LaTeX](https://latex-project.org/ftp.html) installed (it's a big download), pick any of the markdoc .do files and render the output as .tex. Then compile that in LaTeX to render a PDF.
9. Make your own markdoc dynamic document in Markdoc.
	1. Start with a blank .do file.
	2. Start the log file.
	3. Have a section of Stata code & output that you want in the final paper.
	2. Have Stata code that you want in the final paper (with no Stata output).
	3. Have Stata output that you want in the final paper (with no Stata code).
	4. Have Stata code and output where you want *neither* in the final paper.
	5. Write a paragraph that's just the paper.
	6. Generate a figure in Stata and include it in the paper.
	7. OPTIONAL: Run a regression, format the output with outreg2 or estout, and include it in the paper. 
	8. OPTIONAL: Include a citation. (See instructions [here](http://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html).)